---
title: "什么是Agentic Workflows？模式、用例、示例及更多"
date: 2024-07-20
tags: 
  - type/reference
  - subject/ai
  - topic/agent
  - source/translation
  - media/article
source: "https://weaviate.io/blog/what-are-agentic-workflows"
author: "Weaviate团队"
status: completed
---

# 什么是Agentic Workflows？模式、用例、示例及更多

> 原文：[What Are Agentic Workflows? Patterns, Use Cases, Examples, and More](https://weaviate.io/blog/what-are-agentic-workflows)  
> 作者：Weaviate团队

AI代理。Agentic AI。代理架构。Agentic workflows。代理无处不在。但它们到底是什么？它们真的能做什么吗？

新技术总是伴随着混乱的术语、夸张的期望和自封的网络专家。在本文中，我们将拨开围绕AI代理的迷雾，解释并展示Agentic AI的一个关键原则：agentic workflows。

单独的代理做不了太多事情。它们需要被赋予角色、目标和结构来实现目标。这就是workflows的作用所在。

理解agentic workflows能让你明白AI代理如何以及为何以它们的方式运作。为了帮助你理解，我们将介绍AI代理的关键组件，给出agentic workflows的简明定义，解释什么使一个workflow具有agentic特性，详细说明agentic workflows中的关键重复模式，列举真实世界的示例和用例，并诚实地概述使用agentic workflows的好处和挑战。

## 什么是AI代理？

**AI代理**是将用于推理和决策的LLM与用于现实世界交互的工具相结合的系统，使它们能够在有限的人类参与下完成复杂任务。代理被分配特定角色，并被赋予不同程度的自主权来实现最终目标。它们还配备了记忆功能，使它们能够从过去的经验中学习并随着时间的推移提高性能。

要更深入地了解AI代理、它们的历史以及构建工具，请查看我们最近的博客文章[《代理简化：在AI语境中我们指的是什么》](https://weaviate.io/blog/ai-agents)。

为了更好地理解AI代理如何融入agentic workflows，我们将探讨AI代理的核心组件。

### AI代理的组件

尽管AI代理被设计用于半自主决策，但它们依赖于一个更大的组件框架来正常运行。这个框架包括使代理能够有效推理的LLM，帮助代理完成任务的各种工具，以及让代理从过去经验中学习并随时间改进响应的记忆功能。

#### 推理

AI代理如此高效的部分原因在于它们具备迭代推理能力，本质上允许代理在整个问题解决过程中主动"思考"。AI代理的推理能力源于其底层LLM，主要发挥两个功能：规划和反思。

在**规划**阶段，代理执行**任务分解**，将更复杂的问题分解为更小、可操作的步骤。这种技术使代理能够系统地处理任务，并为不同任务使用不同工具。它还允许**查询分解**，将复杂查询分解为更简单的查询，从而提高LLM响应的准确性和可靠性。

代理还通过**反思**其行动结果来进行推理。这使它们能够根据从外部来源获取的结果和数据评估并迭代调整其行动计划。

#### 工具

LLM拥有静态的参数化知识，意味着它们的理解局限于训练期间编码的信息。为了扩展其原始数据集之外的能力，代理可以利用外部**工具**，如网络搜索引擎、API、数据库和计算框架。这意味着代理可以访问实时外部数据来指导其决策，并完成需要与其他应用程序交互的任务。

工具通常与权限配对，例如查询API、发送消息或访问特定文档或数据库模式的能力。下表列出了AI代理的几种常见工具及其执行的任务。

| **工具** | **任务** |
| --- | --- |
| 互联网搜索 | 检索和总结实时信息 |
| 向量搜索 | 检索和总结外部数据 |
| 代码解释器 | 迭代运行代理生成的代码 |
| API | 检索实时信息并与外部服务和应用程序执行任务 |

当LLM选择一个工具来帮助完成任务时，它会进行一种称为**函数调用**的行为，将其能力扩展到简单的文本生成之外，使其能够与现实世界互动。

工具的选择可以由最终用户预先确定，也可以留给代理决定。让代理动态选择工具有助于解决更复杂的任务，但对于更简单的workflows，当预定义工具更高效时，可能会增加不必要的复杂性。

#### 记忆

从过去的经验中学习并记住行动发生的背景是将agentic workflows与纯LLM驱动的workflows区分开来的部分原因。**记忆**是一个关键组件，能够在多个用户交互和会话中捕获和存储上下文和反馈。代理有两种主要类型的记忆：短期记忆和长期记忆。

**短期记忆**存储更直接的信息，如对话历史，这有助于代理确定下一步要采取哪些步骤来完成其总体目标。**长期记忆**存储随时间积累的信息和知识，跨越多个会话，允许代理个性化并随时间提高性能。

## 什么是Agentic Workflows？

一般来说，**workflow**是为实现特定任务或目标而设计的一系列连接步骤。最简单类型的workflow是确定性的，意味着它们遵循预定义的步骤序列，无法适应新信息或变化的条件。例如，一个自动化的费用审批workflow可能是这样的："如果费用被标记为'食品和餐饮'且金额小于30美元，则自动批准。"

然而，一些workflow利用LLM或其他机器学习模型或技术。这些通常被称为**AI workflows**，可以是agentic或非agentic的。在非agentic workflow中，LLM被提示一个指令并生成输出。例如，文本摘要workflow会将较长的文本段落作为输入，提示LLM进行摘要，然后简单地返回摘要。然而，仅仅因为一个workflow使用了LLM，并不一定意味着它是agentic的。

**Agentic workflow**是由一个代理或一系列代理动态执行以实现特定任务或目标的一系列连接步骤。代理被用户授予权限，这赋予它们有限的自主权来收集数据、执行任务并做出在现实世界中执行的决策。Agentic workflows还利用AI代理的核心组件，包括它们的推理能力、使用工具与环境交互的能力以及持久记忆，从而将传统workflows转变为响应式、自适应和自我进化的过程。

### 什么使一个workflow具有agentic特性？

当由一个或多个代理引导和塑造任务进展时，AI workflow就变成了agentic。将代理添加到现有的非agentic workflow中创建了一种混合方法，将结构化workflow的可靠性和可预测性与LLM的智能和适应性相结合。Agentic workflows的定义特征是它们能够：

- **制定计划**。Agentic workflow从规划开始。LLM用于通过任务分解将复杂任务分解为更小的子任务，然后确定最佳执行路径。
- **使用工具执行行动**。Agentic workflows使用一组预定义的工具与权限配对，以完成任务并执行其生成的计划。
- **反思和迭代**。代理可以在每个步骤评估结果，根据需要调整计划，并循环直到结果令人满意。

如你所见，我们需要区分三种类型的workflows：传统的非AI workflows、非agentic AI workflows和agentic workflows。传统基于规则的workflow与AI workflow之间的区别在于使用预定义步骤与使用AI模型完成任务。其次，非agentic和agentic AI workflows之间的区别在于使用静态AI模型与动态AI代理。这使得agentic workflow比非agentic workflow更具适应性和动态性。

### Agentic架构与workflows的区别

随着任何新兴技术的出现，都会涌现大量新术语。虽然有些人可能互换使用"agentic架构"和"agentic workflows"这两个术语，但它们实际上有一个重要的区别。

**Agentic workflow**是代理为实现某个目标而采取的一系列步骤。这些步骤可能包括使用LLM创建计划、将任务分解为子任务、使用互联网搜索等工具完成任务，以及使用LLM反思任务结果并调整其整体计划。

另一方面，**agentic架构**是用于完成给定任务的技术框架和整体系统设计。Agentic架构多种多样且富有创意，但总是包含至少一个具有决策和推理能力的代理、代理可以用来实现其目标的工具，以及用于短期和长期记忆的系统。

注意：探索最强大的agentic架构，可视化说明以便立即理解。在此处下载免费电子书。

## Agentic Workflows中的模式

回想一下，agentic workflow是为完成特定任务（也称为最终目标）而采取的结构化步骤序列。因此，当我们谈论agentic workflows时，我们谈论的是使代理能够实现其最终目标的特定行为模式。正如我们前面提到的，AI代理的核心组件在agentic workflow模式中起着关键作用。代理的推理能力促进了规划和反思模式，而它们使用工具与环境交互的能力则是工具使用模式的基础。

### 规划模式

规划设计模式允许代理自主地将更复杂的任务分解为一系列更小更简单的任务，这一过程称为**任务分解**。任务分解会带来更好的结果，因为它减少了LLM的认知负荷，改善了推理，并最小化了幻觉和其他不准确性。

当实现最终目标的方法不明确且问题解决过程中的适应性至关重要时，规划尤其有效。例如，一个被指示修复软件错误的AI代理可能会使用规划模式将任务分解为子任务，如阅读错误报告、识别相关代码部分、生成潜在原因列表，最后选择特定的调试策略。如果第一次尝试修复错误不成功，代理可以在执行后读取错误消息并调整其策略。

虽然规划可以帮助代理更好地处理更复杂的任务，但它也可能导致比更确定性workflow更不可预测的结果。因此，最好只在需要深入问题解决和多跳推理的任务中使用规划模式。

### 工具使用模式

生成式LLM的一个显著限制是它们依赖于预先存在的训练数据，这意味着它们无法检索实时信息或验证超出先前学习范围的事实。因此，当它们不知道答案时，可能会生成非事实性响应或"猜测"。[检索增强生成(RAG)](https://weaviate.io/blog/introduction-to-rag)通过为LLM提供相关的实时外部数据来帮助缓解这一限制，从而实现更准确和基于上下文的响应。

然而，工具使用通过允许LLM动态与现实世界互动，而不仅仅是从中检索数据，超越了简单的RAG。在agentic workflows中，**工具使用**模式通过允许代理与外部资源和应用程序、实时数据或其他计算资源交互来扩展代理的能力。

常见工具包括API、信息检索（如向量搜索）、网络浏览器、机器学习模型和代码解释器。这些工具用于执行特定任务，如搜索网络、从外部数据库检索数据或阅读和发送电子邮件，帮助代理实现其目标。

### 反思模式

反思是一种强大的agentic设计模式，相对容易实现，并且可以显著提高agentic workflows的改进。**反思模式**是一种自我反馈机制，代理在最终确定响应或采取进一步行动之前迭代评估其输出或决策的质量。这些批评然后被用来完善代理的方法，纠正错误，并改进未来的响应或决策。

当代理不太可能在第一次尝试时就成功实现其目标时，反思特别有用，例如编写代码。在这种情况下，代理可能会生成一个代码片段，在沙箱或执行环境中运行它，并迭代地将错误反馈给LLM，指示其改进代码，直到成功执行。

反思的力量在于代理能够批评自己的输出并将这些见解动态整合到workflow中，从而在没有直接人类反馈的情况下实现持续改进。这些反思可以被编码到代理的记忆中，允许在当前用户会话期间更高效地解决问题，并通过适应用户偏好和改进未来交互来实现个性化。

## Agentic Workflows用例

原子设计模式，如规划和工具使用，可以以创造性的方式组合，以有效地利用agentic AI完成跨不同领域的各种任务。除了组合设计模式外，AI代理还可以提供不同的工具组合，甚至可以被赋予根据需要动态选择工具的能力。它们还可以与人类反馈循环集成，并被赋予不同级别的自主权和决策权。

这些多样化的配置允许agentic workflows为跨行业的广泛任务量身定制。为了证明这一点，我们概述了两个特别强大的用例：agentic RAG和agentic研究助手。

### Agentic RAG

[检索增强生成(RAG)](https://weaviate.io/blog/introduction-to-rag)是一个通过从外部数据源检索相关数据来增强LLM知识的框架。[Agentic RAG](https://weaviate.io/blog/what-is-agentic-rag)将一个或多个代理整合到RAG管道中。

在规划阶段，代理可以通过查询分解将复杂查询分解为更小的子查询，或确定是否需要向用户询问更多信息来完成请求。

AI代理还可以用于在将检索到的数据和响应传递给用户之前评估其相关性和准确性。如果响应不令人满意，代理可以重新制定查询，重新访问查询分解步骤，甚至创建一个新的响应查询计划。

注意：像这样的agentic workflows可以用不同的agentic架构构建。如果你对这个workflow的潜在架构感到好奇，请下载我们关于agentic架构的免费电子书！

### Agentic研究助手

Agentic研究助手，也被一些AI公司称为"深度研究"，通过搜索网络和各种外部数据生成关于复杂主题的深入报告和详细见解。这些利用agentic RAG从网络和其他外部源检索信息以响应用户查询。然而，与传统RAG不同的是，它们能够合成和分析信息，而不仅仅是检索来自外部源的相关数据以增强LLM生成的输出。

这种独特的能力归功于几个特性。首先，agentic研究助手通常使用专门针对网络浏览、任务分解和动态规划进行微调的LLM。其次，这些workflow中的代理积极寻求用户指导，请求更多信息或澄清以更好地理解最终目标。第三，这些代理能够根据检索到的信息调整计划并改变方向。这意味着它们可以在合成新信息时追求新的有趣角度，并连续查询多个数据源，直到获得必要的数据。

因此，agentic研究助手能够获得更深入的见解，识别随时间变化的趋势，并编译关于主题的完整报告，而不仅仅是检索现有知识。在撰写本文时，[OpenAI](https://openai.com/index/introducing-deep-research/)、[Perplexity](https://www.perplexity.ai/hub/blog/introducing-perplexity-deep-research)和[Google](https://blog.google/products/gemini/google-gemini-deep-research/)都有自己公开可用的深度研究版本。

### Agentic编码助手

Agentic编码助手可以在最少人工干预的情况下生成、重构、改进和调试代码。非agentic编码助手，如GitHub Copilot的第一个版本，由经过微调以生成代码的生成式LLM提供支持，但仅限于此——生成代码。

使编码助手具有agentic特性的是它能够通过执行生成的代码并根据执行结果、错误或反馈迭代改进代码来与环境交互。这些助手还可以被授予权限，通过创建提交和PR对现有代码库进行更改，如Anthropic的[Claude Code](https://docs.anthropic.com/en/docs/agents-and-tools/claude-code/overview)，这是自动化软件开发过程中的重要一步。Agentic编码助手还可以用于建议终端命令和其他代码更改和添加，并在执行前等待明确的人工批准，如Cursor的[Agent](https://docs.cursor.com/agent)，允许人类完全控制代理。此外，重要的是，agentic编码助手可以通过将错误编码到长期记忆中来从错误中学习，使它们随着时间的推移变得更聪明。

## Agentic Workflow示例

现在我们已经概述了agentic workflows的一些用例，我们将更详细地查看两个真实世界代理的workflow的各个步骤：[Claygent](https://www.clay.com/claygent)和[ServiceNow AI Agents](https://www.servicenow.com/products/ai-agents.html)。每个workflow都使用自己独特的模式组合和工具，赋予其代理不同程度的自主权和决策能力，并依赖于不同级别的人类反馈和参与。

### Claygent (Clay)

潜在客户研究和数据丰富对于增长和销售团队来说可能是一项繁琐的任务。[Clay](https://www.clay.com/)，一家数据丰富和触达自动化公司，通过[Claygent](https://www.clay.com/claygent)——一个AI驱动的研究代理，持续扫描网络和内部数据库以提供实时、可操作的见解，简化了这一过程。

假设你想使用Claygent基于姓名和电子邮件地址列表丰富LinkedIn个人资料，然后发送个性化的介绍消息。首先，你指定要查找的数据字段（如工作经验、教育背景、技能），这些字段被注入到预配置的提示模板中。代理的LLM处理查询，使用网络抓取工具搜索LinkedIn URL，并从LinkedIn个人资料中提取所需数据。然后，这些数据可以发送到另一个LLM，你可以指示它以任何方式总结或分析丰富的数据。然后可以使用相同的LLM（或不同的LLM）为每个个人资料创建个性化的触达消息。

Claygent是一个相对灵活的agentic workflow示例，可以以创造性的方式进行定制，同时仍然通过针对特定任务的预配置提示模板为代理提供指导。

### ServiceNow AI Agents

[ServiceNow](https://www.servicenow.com/)是一个基于云的平台，可简化和自动化跨IT、运营、人力资源和客户服务领域的workflows。他们的ServiceNow平台现在包括对AI代理的访问，旨在自动化重复性任务和预先存在的workflows，同时仍然让人类完全控制决策。

以下是agentic workflow如何帮助解决技术支持案例的示例。当客户提交技术支持票证时触发workflow。票证中的信息然后传递给一个或多个代理，这些代理在内部IT支持知识库上执行RAG。代理总结发现，分析类似案例，并为IT支持专家生成摘要。最后，它生成关于如何进行的建议，专家可以批准或拒绝。

ServiceNow AI代理代表了一种创新但更谨慎的方法来在生产中部署代理，赋予它们严格的角色和要完成的任务，以及有限的（如果有的话）自主权来做出影响最终用户或客户的决策。

注意：想构建自己的agentic workflow吗？查看[使用Inngest构建Agentic Workflows](https://weaviate.io/blog/inngest-ai-workflows)，我们展示了如何创建一个agentic晚餐计划器。

## Agentic Workflows的好处和限制

AI代理已经迅速从机器学习社区进入主流。鉴于围绕agentic AI的所有兴奋、期待和期望，可能很难将炒作与现实区分开来，并理解其真正的能力和限制。在本节中，我们将为你提供关于agentic workflows的好处、挑战和限制的平衡观点。

### Agentic Workflows的好处

Agentic workflows通过使AI代理能够计划、适应和随时间改进，超越了传统自动化。与遵循固定规则的确定性workflow不同，agentic workflows可以动态响应复杂性，通过反馈改进其方法，并扩展以处理更高级的任务。这种适应性使它们在灵活性、学习和决策至关重要的场景中特别有价值。

让我们仔细看看agentic workflows的好处：

- **灵活性、适应性和可定制性。**
静态的确定性workflow难以适应不断变化的情况和意外困难。另一方面，agentic workflows提供了根据任务难度进行调整和发展的灵活性，确保它们始终保持相关性并提供最佳解决方案。它们还可以通过组合不同模式进行定制，实现模块化设计，允许随着需求和复杂性的增长进行迭代升级。
- **在复杂任务上改进性能。**
通过将复杂任务分解为更小的可管理步骤（通过任务分解和规划），agentic workflows显著优于确定性、零样本方法。
- **自我纠正和持续学习。**
反思模式允许agentic workflow评估自己的行动，改进策略，并随时间改进结果。利用短期和长期记忆，它们从过去的经验中学习，随着每次迭代变得更有效和个性化。
- **操作效率和可扩展性。**
Agentic workflows可以高精度地自动化重复性任务（如果构建正确），减少特定场景中的手动工作和运营成本。它们还可以轻松扩展，非常适合处理更大的工作量或复杂系统。

### Agentic Workflows的限制

尽管agentic workflows提供了许多好处，但它们也带来了一些独特的挑战和限制。这些包括：

- **复杂性和开发成本。**
构建有效的agentic workflow需要仔细考虑架构设计、工具选择和代理行为。这通常需要比传统workflow更多的开发时间和资源投入。
- **不可预测性。**
由于agentic workflows的动态特性，它们可能产生意外结果或采取意想不到的路径来完成任务。这种不可预测性使得调试和验证更具挑战性。
- **潜在的安全和隐私风险。**
授予代理权限访问工具和数据源可能会引入新的攻击面或隐私问题。必须仔细考虑和实施适当的访问控制和监控。
- **幻觉和错误传播。**
LLM仍然容易产生幻觉或传播错误信息，特别是在处理复杂或模糊的任务时。虽然反思模式可以帮助缓解这一问题，但不能完全消除。
- **计算成本。**
运行多个代理迭代、工具调用和反思循环可能会显著增加计算成本，特别是对于复杂的workflows。

## 结论

Agentic workflows代表了AI自动化的重大进步，将传统workflows的结构化方法与AI代理的适应性和智能相结合。通过理解agentic workflows的核心组件、模式和用例，你可以更好地评估它们如何为你的特定需求增加价值。

虽然agentic workflows提供了显著的好处，包括灵活性、改进的性能和自我纠正能力，但它们也带来了独特的挑战，如增加的复杂性、不可预测性和潜在的安全风险。随着技术的成熟和最佳实践的建立，这些挑战可能会减少。

最终，agentic workflows最强大的应用可能在于它们与人类协作的能力，而不是完全取代人类。通过将人类专业知识与AI代理的能力相结合，组织可以创建更强大、更高效的混合智能系统。 