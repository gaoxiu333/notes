# Threejs

- [Preview](https://gltf-viewer.donmccurdy.com/)

## 技术点

- 场景「Scene」→ 顶层 Object3D
- 动画
- `Mesh`、`Group`、`Camera`、`Light`

> `Mesh` 用于定义可渲染的几何体和材质组合，`Group` 则是一个容器，用于将多个 `Object3D`（例如 `Mesh`、`Light`、`Camera` 等）组合在一起进行操作
> 
- Object3D
    - 三位对象的标准基类，提供了如下属性
    - position、rotation、scale

## 关键技术

- `@react-three/drei`
- `@react-three/fiber`
- [`@react-three/gltfjsx`](https://github.com/pmndrs/gltfjsx)
- [**`curtainsjs`**](https://github.com/martinlaxenaire/curtainsjs)

[Shader Park](https://bestofjs.org/projects/shader-park)

https://neat.firecms.co/

## API

- [CameraControls](https://github.com/yomotsu/camera-controls)
    - [Canvas](https://r3f.docs.pmnd.rs/api/canvas)
    - 相机控制：它可以控制旋转等
    - `minDistance`
    - `enabled`
    - `verticalDragToForward`
    - `dollyToCursor`
    - `infinityDolly`
    - [详细参考](https://github.com/yomotsu/camera-controls?tab=readme-ov-file#properties)
- [`group` 、 `Mesh` 等都有相应的属性](https://r3f.docs.pmnd.rs/api/objects)
    - [材质](https://threejs.org/docs/#api/zh/materials/MeshStandardMaterial.envMapIntensity)
    - `position` - 平面移动
    - `rotation` - 角度旋转
    - `envMapIntensity` - 环境贴图强度
    - `roughness` - 粗糙度
    - `roughnessMap` - 粗糙度贴图
    - `metalness`  - 金属度

## 用到的效果

- [加载效果](https://codesandbox.io/p/sandbox/glas-transmission-fresnel-enx1u?file=%2Fsrc%2FApp.js)
- 选中的小控件：https://drei.docs.pmnd.rs/gizmos/transform-controls
- 一样：https://codesandbox.io/p/sandbox/ls503?file=/src/App.js
- https://codesandbox.io/p/sandbox/ny3p4?file=/src/App.js
- https://drei.docs.pmnd.rs/staging/sparkles
- 蒙版：https://codesandbox.io/p/sandbox/7n2yru?file=/src/App.js:26,14
- 场景切换：https://codesandbox.io/p/sandbox/9m4tpc?file=/src/App.js
- 查看 html？https://drei.docs.pmnd.rs/portals/view
- 三次被塞尔曲线：https://drei.docs.pmnd.rs/shapes/cubic-bezier-line
- 二次：https://drei.docs.pmnd.rs/shapes/quadratic-bezier-line
- 排版：https://drei.docs.pmnd.rs/staging/center
- 环境，背景：https://drei.docs.pmnd.rs/staging/environment
- [旋转动画](https://codesandbox.io/p/sandbox/0buje?file=%2Fsrc%2FApp.tsx%3A1%2C1-43%2C1)
- [选中效果](https://threejs.org/docs/#examples/en/postprocessing/EffectComposer)
- [移动到目标](https://codesandbox.io/p/sandbox/sew669?file=%2Fsrc%2FApp.js%3A63%2C49-63%2C53)
- [背景](https://neat.firecms.co/)
- 自动晃动效果 [示例代码](https://codesandbox.io/p/sandbox/szj6p7?file=%2Fsrc%2FApp.js)
- [线条效果](https://codesandbox.io/p/sandbox/3k4g6?file=%2Fsrc%2FApp.js)
- [着色器效果](https://bkcore.com/blog/3d/webgl-three-js-animated-selective-glow.html) - 比如选中让材质发光
- [简单的模型素材](https://market.pmnd.rs/)

## 事件

react-three/fiber

- **onPointerMissed**

## 视频

```bash
ffmpeg -i cast.mov cast.webm
ffmpeg -i cast1.mov -c:v libvpx-vp9 -pix_fmt yuva420p cast1.webm
```

13718683735

13558650269