# npm

Owner: xiu gao

# npm

## npm 账号信息

npm地址：https://www.npmjs.com/

账号：gaoxiu

邮箱：gaoxiu333

## registry

JavaScript 包注册表，其中包括npm公司维护的官方镜像以及由社区维护的其他镜像。

- 公共/官方 ：`https://registry.npmjs.org`
- 淘宝镜像：`https://registry.npm.taobao.org`

### 通过CLI修改

```
npm config list
npm get registry
npm set registry=https://registry.npmjs.org
npm delete registry
```

### 通过`.npmrc`配置

```
// .npmrc
registry=https://registry.npmjs.org
```

### 单独指定registry

```
npm i package --registry=URL # 单个包
```

> 除了比较知名的公共镜像，也可以私有部署npm镜像。
> 

## `npm run` VS `npm exec` VS `npx`

`npm exec`、`npm run`和`npx`都是npm命令行工具提供的命令，但它们之间有一些区别：

1. **npm exec**：
    - 用途：在当前项目的上下文中执行特定的命令，可以是项目中安装的包的可执行文件或其他系统命令。
    - 语法：`npm exec [-- <command>] [arguments...]`
    - 示例：`npm exec -- eslint src/`
    - 作用：不下载软件包，只是运行已经存在的软件包`node_modules/.bin`。
2. **npm run**：
    - 用途：运行项目中定义在`package.json`文件中的脚本命令。
    - 语法：`npm run <script-name> [-- <args>]`
    - 示例：`npm run start`
    - 作用：运行在`package.json`文件中定义的脚本命令，通常用于启动应用程序、运行测试、构建项目等常见任务。
3. **npx**：
    - 用途：临时执行安装在本地项目中的或者远程npm registry中的包。如果本地项目中没有安装指定的包，它会临时下载并执行。
    - 语法：`npx [options] <command>[@version] [command-arguments]`
    - 示例：`npx create-react-app my-app`
    - 作用：在不全局安装包的情况下，但会下载，临时运行包中的可执行文件。通常用于执行一次性任务、运行命令行工具或者使用特定版本的包。

总结：

- `npm exec`用于在项目上下文中执行特定命令，通常用于执行项目依赖中的可执行文件。
- `npm run`用于运行在`package.json`文件中定义的脚本命令，通常用于项目开发、测试和构建。
- `npx`用于临时执行包中的可执行文件，无需全局安装，常用于一次性任务和使用特定版本的包。

## npm workspaces

npm workspaces 的简单示例：

```
npm init -w ./packages/a # 初始化一个子工作空间
npm install abbrev -w a  # 给工作空间a添加依赖
```

## npm 仓库

- [verdaccio](https://github.com/verdaccio/verdaccio) 基于 nodejs 的轻量级私有仓库
- Nexus - 基于JAVA

## script

- `packageName: build`可以在任何地方运行的脚本命令？？
- `$INIT_CWD`指向运行脚本的目录

## TODO

- 什么是`semver`
- `npm set pkg`

## 参考

- [npm 开发者指南](https://docs.npmjs.com/misc/developers)