# nestjs 中设置https证书

# nestjs 中设置https证书

## 先决条件

确保已经安装以下工具，注意仅仅是【本地】

1. nodejs
2. Nextjs CLI
3. [mkcert](https://github.com/FiloSottile/mkcert)

## 使用 mkcert 生成 SSL 证书

确保你在一个Nextjs项目中

```
midir -p src/cert # 如果没有该文件自动创建
mkcert -install
mkcert -key-file ./src/cert/key.pem -cert-file ./src/cert/cert.pem localhost
```

## 更新Nextjs配置

```tsx
// main.tsimport { NestFactory } from '@nestjs/core';import { AppModule } from './app.module';import * as fs from 'fs';async function bootstrap() {
  const httpsOptions = {
    key: fs.readFileSync('./src/cert/key.pem'),    cert: fs.readFileSync('./src/cert/cert.pem'),  };  const app = await NestFactory.create(
    AppModule,    { httpsOptions },  );  await app.listen(3000);}
bootstrap();
```

## 参考

https://rehansattar.dev/creating-a-local-https-nestjs-server-with-free-ssl-certificates-a-step-by-step-guide

[使用certbot给服务器生成免费SSL](https://certbot.eff.org/instructions?ws=nginx&os=ubuntufocal&tab=standard) - Let’s Encrypt