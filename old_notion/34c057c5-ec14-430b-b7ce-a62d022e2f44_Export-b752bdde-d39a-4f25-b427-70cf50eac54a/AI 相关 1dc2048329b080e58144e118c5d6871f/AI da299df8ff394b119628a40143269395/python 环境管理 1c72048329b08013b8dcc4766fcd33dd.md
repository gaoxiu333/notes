# python 环境管理

python 环境包含版本和依赖，分别需要用到不同的工具，通常推荐使用：

- **大多数开发者推荐 pyenv 进行 Python 版本管理**，因为它支持多个 Python 版本共存。
- **虚拟环境推荐 venv（轻量级）或 poetry（现代化依赖管理）。**
- **对于长期维护的项目，使用 poetry 或 requirements.txt 来管理依赖并锁定版本。**

| **任务** | **推荐工具** | **适用场景** |
| --- | --- | --- |
| **管理 Python 版本** | pyenv | 在同一台电脑上切换不同 Python 版本 |
| **管理虚拟环境** | venv | 轻量级、适用于小型项目 |
| **依赖管理** | poetry | 现代化依赖管理，推荐用于生产环境 |
| **锁定 Python 版本** | .python-version | 确保团队统一 Python 版本 |

## 示例

如果你要创建一个新项目，完整的操作步骤如下：

```bash

# 1. 安装并切换 Python 版本
pyenv install 3.11.2
pyenv local 3.11.2

# 2. 创建虚拟环境
python -m venv venv
source venv/bin/activate

# 3. 安装依赖
pip install requests flask
pip freeze > requirements.txt

# 4. 运行代码
python app.py
```

使用 poetry

```bash
# 1. 设置 Python 版本
pyenv install 3.11.2
pyenv local 3.11.2

# 2. 创建 `poetry` 项目
poetry new my_project
cd my_project
poetry env use python3

# 3. 安装依赖
poetry add flask requests

# 4. 运行代码
poetry run python app.py
```

## poetry 安装

使用 `pipx` 安装

```bash
brew install pipx
pipx install poetry
pipx upgrade poetry

```