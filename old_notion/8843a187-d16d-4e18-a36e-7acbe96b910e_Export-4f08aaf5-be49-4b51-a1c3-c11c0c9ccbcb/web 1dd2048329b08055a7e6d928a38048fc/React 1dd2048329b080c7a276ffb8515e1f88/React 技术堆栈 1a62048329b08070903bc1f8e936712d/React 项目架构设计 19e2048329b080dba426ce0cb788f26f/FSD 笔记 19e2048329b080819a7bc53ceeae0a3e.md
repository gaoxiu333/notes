# FSD 笔记

## Feature Sliced Design（FSD）

- Layers（层）
    - 分别为：app、processes（已废弃）、pages、widgets、features、entities 和 shared
- Slices（切片）
    - 切片按照业务领域划分，保持相关模块紧密相连。
    - 每一个Layers 都有一个或多个 Slices
- Segments（段）
    - 段按代码的用途对其进行分组
    - 常见：
        - ui — 与 UI 显示相关的内容：UI 组件、日期格式化、样式等。
        - api — 后端交互：请求函数、数据类型、映射等。
        - model — 数据模型：模式、接口、状态管理和业务逻辑。
        - lib — 其他模块所需的库代码。
        - config — 配置文件和功能标志。
    - 特殊
        - **App 和 Shared 有自己的 Segments**

![image.png](FSD%20%E7%AC%94%E8%AE%B0%2019e2048329b080819a7bc53ceeae0a3e/image.png)

示例

```bash
src/
├── app/                 # 应用初始化/路由/全局样式/根组件
│   ├── index.tsx        # 应用入口文件
│   └── store.ts         # 全局状态管理（如redux store）
├── processes/           # 跨页面的复杂业务流程（可选层）
│   └── checkout-flow/   # 示例：电商结账流程
├── pages/               # 路由页面组件
│   └── home-page/       # 示例：首页
├── features/            # 可复用的自包含功能模块
│   └── auth/            # 示例：认证功能
│       ├── ui/          # 该功能的UI组件
│       ├── model/       # 业务逻辑（状态管理/API调用）
│       └── lib/         # 功能专用工具函数
├── entities/            # 核心业务实体组件
│   └── user/            # 示例：用户实体
│       ├── ui/          # 用户相关UI组件
│       └── model/       # 用户数据逻辑
└── shared/              # 共享的基础代码
    ├── ui/              # UI组件库（按钮/输入框等）
    ├── lib/             # 通用工具函数/helpers
    ├── api/             # API请求配置
    └── config/          # 应用配置（常量/环境变量）
```

💡 关键注释：

1. **依赖方向**：`app` → `pages` → `features` → `entities` → `shared`（高层可依赖低层，反之不可）
2. `features/` 是独立功能模块，应包含自身完整的业务逻辑和UI
    1. 这里其实更加关注的是用户交户相关的业务逻辑
3. `entities/` 聚焦纯业务逻辑，与具体实现解耦
    1. 这里更加关注的是数据交互相关的逻辑，但是为什么会需要UI？这是一个疑问
4. `shared/` 保持技术中立，不包含业务逻辑
5. 每个切片应包含：`ui/` (组件)、`model/` (业务逻辑)、`lib/` (工具函数)

建议搭配以下文件扩展使用：

- `.model.ts` - 状态管理相关
- `.api.ts` - API请求定义
- `.constants.ts` - 常量配置
- `.utils.ts` - 工具函数

最新的2.0又添加了新字段 这些字段又会有哪些意义？

以及对 nextjs项目如何改造？