# 架构思路

## 确认设计系统

UI和交互体验要统一风格，需要先定设计系统，包括颜色、字体、间距、动效规范。

是否使用 css 变量来管理主题

动效选择有 framer-motion或者react-sparing

## 状态管理选择

Redux 可能比较重，是否会有更轻量级的选择方法，比如：Recoil、Jotai、Zustand。甚至Context API能否覆盖？

使用 redux-toolkit是最佳选择，如果倾向于轻量，Zustand更好。

异步状态管理：  **React Query**、**SWR** 或 **Apollo Client**（GraphQL）管理服务端状态

## UI

可以搭建自己的组件库，不过成本过高。如果是基于某个库定制呢？比如 MUI ，但是它如了比较多的预设样式。

- 有很多 UI 框架提供选择，比如 Ant Design、shadcn/ui 等
- 如果选择Tailwind可能需要搭配 Headless UI 的组件库，比如 Radix UI

**明确业务场景：**

| **维度** | **权重系数** | **典型痛点** | **工具解决方案示例** |
| --- | --- | --- | --- |
| **C端/B端** | ★★★★★ | B端表单复杂度 vs C端交互体验 | Ant Design/Shadcn |
| **开发效率** | ★★★★☆ | 组件覆盖度 vs 定制成本 | Ant Pro/自建 |
| **性能优化** | ★★★★☆ | 包体积问题 vs DOM渲染层级 | Headless UI + Web组件 |
| **跨端能力** | ★★★☆☆ | 响应式 vs 原生渲染 |  |
| **a11y标准** | ★★★★☆ | 无障碍合规风险 |  |

**框架比较**

<aside>
💡

**无样式UI框架：**适合需要更为灵活、个性化的C端框架（Shadcn UI + vite）

**Ant Design**：在企业级应用或后台管理系统中，Ant Design 是一个非常可靠的选择，比如像是开发管理后台，最好是基于 ant 生态（Ant Desig Pro + umijs）,有助于提升效率

</aside>

## 结构设计

然后是架构设计，需要模块化，组件化。可能要考虑如何拆分功能模块，按业务还是按功能？公共组件和业务组件如何划分？

## 性能优化

- 代码分割、懒加载、图片优化、CDN
- 确保体积尽量小：vite 默认支持路由级别的懒加载，另外 Tree-shaking需要配置好，配合一些分析工具

## 工具链

Vite 作为构建工具，因为它插件系统丰富，但是需要配置好 ESLint、Prettier、Husky等代码规范

测试方面：Jest和React Testing Library做单元测试，Cypress或playwright做E2E测试，可能还需要Stroybook做组件文档和可视化测试。

持续集成部署：Github Actions、GitLab CI 自动化测试和部署，提高效率

## TODO

- **渲染策略与SEO优化**

## 世界难题

对我来说很难理解的概念，不过看到出处之后就突然懂了

- **水合：react 中的水合指的是服务端渲染的HTML发送到浏览器已经呈现，但是js还没有加载完，此时的页面就像冻住了一样，js加载完，绑定交互事件的过程称为水合(冰融化成水)**