# redux - mobx

在hooks之前，react状态分为两大阵营

- redux
    - 单一数据流
- mobx
    - 响应式可追踪

hooks 之后是原子化（Atom）

- recoil
- zhuotai?
- 弊端，
    - 撤销重做等功能还是redux好做
    - 大型项目还是redux好做

![image.png](redux%20-%20mobx%2019a2048329b08097acadf56b613da615/image.png)

## Redux

- React 原理
    - 第一原则：订阅发布模式
        - 事件修改状态
        - 监听就监听状态的变化
    - 作业：写一个订阅发布。
    - 中间件
    - 分发
- react redux 原理
    - 只要 store 更新，就刷新组件
- hooks 时代下的 redux
    - 订阅 → 闭包函数
    - 监听api `useSyncExteranlStore`
- redux 弊端
    - 导致的重新渲染
    - 数据更新 - 数据修改的写法问题
    - 数据清除 - 页面卸载后，之前的 store 还在。也没有提供数据清除的方法

## mobox

设计出发点：响应式框架，类似于 Vue

- observable vs reactive
- observer vs effect
- computed
- autorun vs watch

基本概念

- state
- actions
- derivations

垃圾回收，标记删除

![image.png](redux%20-%20mobx%2019a2048329b08097acadf56b613da615/image%201.png)

reflect 解决this指向问题

弊端

- 没有 ui 的响应式框架
    - 批处理，自己实现的调度
- 享受不到react框架的优化有点
- UI 和 逻辑需要切分，不然会导致性能问题？？

https://juejin.cn/post/6978304166154207239

https://zhuanlan.zhihu.com/p/523683561

**以上关于批处理**