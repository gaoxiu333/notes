# Eslint

# **Eslint**

## **Linters 有两类规则**

1. 格式规则： 比如：单行最大长度，逗号风格，空格等
2. 代码质量规则：
    
    比如：禁止使用未使用的变量，禁止声明全局变量等。
    

## **开始**

```
pnpm create @eslint/config
# 使用 eslint-config-standard 配置文件初始化
pnpm create @eslint/config -- --config eslint-config-standard

```

### **手动设置JS**

```
pnpm add --save-dev eslint @eslint/js

```

配置文件

```jsx
// eslint.config.jsimport js from "@eslint/js";

export default [
    js.configs.recommended,

   {
       rules: {
           "no-unused-vars": "warn",
           "no-undef": "warn"
       }
   }
];

```

## **配置文件**

- [`eslint.config.js`](https://eslint.org/docs/latest/use/configure/configuration-files)

## **命令行**

- `npx eslint .` 检查所有代码
- `npx eslint -h`查看帮助
- `npx eslint -c eslint.config.mjs` 指定配置文件
- `npx eslint --fix` 修复代码
- `npx eslint --stdin --fix-dry-run --format json`

## **解析器**

ESLint 的默认解析器和核心规则仅支持最新的最终 ECMAScript 标准，不支持 Babel 提供的实验性（例如新功能）和非标准（例如 Flow 或 TypeScript 类型）语法

- `languageOptions.parser`
    - 默认：默认解析器支持所有非实验语法以及 JSX
    - `@babel/eslint-parser` - 支持 Babel 提供的实验性（例如新功能）和非标准（例如 Flow 或 TypeScript 类型）语法
    - 其他
        - [Esprima](https://www.npmjs.com/package/esprima)
        - [@typescript-eslint/parser](https://www.npmjs.com/package/@typescript-eslint/parser)

## **预定义配置**

- `"eslint:recommended"`：ESLint推荐的规则
- `"eslint:all"`：ESLint 附带的所有规则

以上两个规则都在`@eslint/js`包里

```jsx
import js from "@eslint/js";
export default [
    js.configs.recommended,
    js.configs.all,
    customConfig,
    myConfig,
    {
        rules: {
            semi: ["warn", "always"]
        },
// ...other config
    }
];

```

## **处理V8版本的配置**

- 依赖：`@eslint/eslintrc`

```jsx
import { FlatCompat } from "@eslint/eslintrc";
import path from "path";
import { fileURLToPath } from "url";

// mimic CommonJS variables -- not needed if using CommonJSconst __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const compat = new FlatCompat({
    baseDirectory: __dirname
});

export default [

// mimic ESLintRC-style extends
    ...compat.extends("eslint-config-my-config"),
];
```

---