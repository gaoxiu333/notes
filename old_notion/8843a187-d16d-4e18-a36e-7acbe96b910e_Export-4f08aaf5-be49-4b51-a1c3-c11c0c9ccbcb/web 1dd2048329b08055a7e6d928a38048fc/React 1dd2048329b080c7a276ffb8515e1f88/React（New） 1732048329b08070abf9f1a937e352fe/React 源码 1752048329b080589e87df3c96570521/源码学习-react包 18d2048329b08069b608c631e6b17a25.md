# 源码学习-react包

**理解组件模型、hooks系统**

- **目标**：
    - 掌握 React 的基础元素（如 `ReactElement`）、组件类（`Component`/`PureComponent`）和 Hooks 的核心逻辑。
- **关键点**：
    - `React.createElement` 如何创建虚拟 DOM 元素。
    - `React.Component` 的生命周期和更新机制。
    - Hooks 的实现原理（如链表结构、`useState`/`useEffect` 的调度）。
- **理解：**
    - 主要负责定义组件、Hooks、以及一些公共API，比如createElement、useState等。这些是React的核心逻辑，但本身不处理渲染，渲染是由react-dom或react-native等渲染器处理的。react包提供了组件和Hooks的基础结构，让开发者可以编写组件。

## 核心API

**源码**

- 出口：[packages/react/index.js](https://github.com/facebook/react/blob/v18.2.0/packages/react/index.js)

**核心方法：**

- 组件相关
    - `Component` 类组件基类
    - `PureComponent` 纯组件基类
    - `Fragment` 片段组件
    - `StrictMode` 严格模式
    - `Profiler` 性能分析组件
    - `Suspense` 异步加载边界
    - `SuspenseList` Suspense 列表协调器
- 创建元素相关
    - `createElement` 元素创建方法
    - `cloneElement` 元素克隆方法
    - `createFactory` 元素工厂创建（已弃用）
    - `isValidElement` 元素验证方法
- Refs 相关
    - `createRef` Ref 对象创建
    - `forwardRef` Ref 转发
- Hooks API
    - `useState`
    - `useReducer`
    - `useEffect`
    - `useLayoutEffect`
    - `useInsertionEffect`
    - `useCallback`
    - `useMemo`
    - `useRef`
    - `useContext`
    - `useDebugValue`
    - `useDeferredValue`
    - `useTransition`
    - `useId`
    - `useMutableSource`
    - `useSyncExternalStore`
- 高级组件模式
    - `memo` 记忆组件
    - `lazy` 懒加载组件
    - `startTransition` 过渡标记
- 上下文相关
    - `createContext` 上下文创建
    - `createServerContext` 服务端上下文（实验性）

**关键概念**

- **并发模式支持：**`startTransition`/`useTransition` 等 API 是并发特性的基础设施
- **服务端组件支持：**`createServerContext` 等类型为服务端组件做准备
- **性能优化：**`Profiler`、`SuspenseList` 等组件提供细粒度性能控制