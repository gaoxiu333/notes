---
title: ä¾èµ–ç®¡ç†æŒ‡å—
jd_id: J10-20250528-1401
created: 2025-05-28 14:01
updated: 2025-05-28 14:01
type: guide
status: active
tags: [topic/dependency, topic/pnpm, topic/management, action/guide]
---

# ğŸ“¦ ä¾èµ–ç®¡ç†æŒ‡å—

## å·¥å…·ä»‹ç»

- knip - æ£€æµ‹æœªä½¿ç”¨çš„åŒ…æˆ–æ–‡ä»¶
- syncpack - ç»Ÿä¸€ä¾èµ–ç®¡ç†

**æ·»åŠ /åˆ é™¤/æ›´æ–°ä¾èµ–ï¼š**

- **é’ˆå¯¹ç‰¹å®šåº”ç”¨æˆ–åŒ…ï¼š**

```bash
# è¿›å…¥ç‰¹å®šåŒ…ç›®å½•
cd apps/nextjs-app
pnpm add <package-name>
# æˆ–è€…åœ¨æ ¹ç›®å½•ä½¿ç”¨ --filter
pnpm add <package-name> --filter nextjs-app
```

**é’ˆå¯¹æ ¹å·¥ä½œåŒºï¼ˆä¸»è¦ç”¨äºå¼€å‘å·¥å…·ï¼‰ï¼š**

```
pnpm add <package-name> -D -w # -w æˆ– --workspace-root
pnpm add "@repo/eslint-config@workspace:*" --filter react-vite
```

**å‡çº§ä¾èµ–ï¼š**

```
pnpm up -r <package-name> # å‡çº§æ‰€æœ‰åŒ…ä¸­çš„ <package-name>
pnpm up -r --latest       # å‡çº§æ‰€æœ‰åŒ…ä¸­çš„æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆè°¨æ…æ“ä½œï¼‰
```

- **ä¿æŒç‰ˆæœ¬ä¸€è‡´æ€§ï¼š**
    
    - **å®šæœŸè¿è¡Œ `syncpack lint` å’Œ `syncpack fix`** æ¥æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤ä¸åŒåŒ…ä¹‹é—´ç›¸åŒä¾èµ–çš„ç‰ˆæœ¬ä¸ä¸€è‡´é—®é¢˜ã€‚
    - å¯¹äºéå¸¸æ ¸å¿ƒçš„åº“ï¼ˆå¦‚ React, Next.jsï¼‰ï¼Œå¦‚æœé‡åˆ°éš¾ä»¥è§£å†³çš„ä¼ é€’ä¾èµ–ç‰ˆæœ¬å†²çªï¼Œå¯ä»¥è€ƒè™‘åœ¨æ ¹ `package.json` çš„ `pnpm.overrides` å­—æ®µä¸­å¼ºåˆ¶æŒ‡å®šç‰ˆæœ¬ã€‚
- **å¤„ç†å†…éƒ¨åŒ…ä¾èµ–ï¼š**
    
    - å½“ `apps/nextjs-app` éœ€è¦ä½¿ç”¨ `packages/ui` ä¸­çš„ç»„ä»¶æ—¶ï¼Œç”±äº `link-workspace-packages=true` å’Œ `save-workspace-protocol=true` çš„é…ç½®ï¼Œpnpm ä¼šè‡ªåŠ¨å¤„ç†æœ¬åœ°é“¾æ¥ã€‚ç›´æ¥åœ¨ `nextjs-app/package.json` ä¸­æ·»åŠ  `"@repo/ui": "workspace:*"` å³å¯ã€‚
- **ä»£ç é£æ ¼å’Œè´¨é‡æ£€æŸ¥ï¼š**
    
    - `lint` å’Œ `check-types` è„šæœ¬é€šè¿‡ Turborepo åœ¨æ‰€æœ‰ç›¸å…³åŒ…ä¸­æ‰§è¡Œã€‚
    - Husky `pre-commit` é’©å­ç¡®ä¿æäº¤å‰ä»£ç ç¬¦åˆ lint è§„èŒƒã€‚
- **ç¯å¢ƒç®¡ç†ï¼š**
    
    - æ ¹ç›®å½•çš„ `.nvmrc` æ–‡ä»¶ï¼ˆå†…å®¹ä¸º `lts/jod`ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªç‰¹å®šçš„LTSç‰ˆæœ¬ä»£å·æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„åˆ«åï¼‰å»ºè®®ä½¿ç”¨ NVM (Node Version Manager) æ¥ç®¡ç† Node.js ç‰ˆæœ¬ï¼Œä»¥ä¿è¯å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚
    - æ ¹ `package.json` ä¸­çš„ `"engines": { "node": ">=18" }` ä¸ `.npmrc` ä¸­çš„ `engine-strict=true` é…åˆï¼Œå¼ºåˆ¶è¦æ±‚ä½¿ç”¨ç¬¦åˆæ¡ä»¶çš„ Node.js ç‰ˆæœ¬