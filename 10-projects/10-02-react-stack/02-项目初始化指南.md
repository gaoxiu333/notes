---
title: 项目初始化指南
jd_id: J10-20250528-1351
created: 2025-05-28 13:51
updated: 2025-05-28 13:51
type: guide
status: draft
tags: [topic/react, topic/setup, topic/guide, action/init]
---

# 🚀 React Stack Boilerplate 初始化指南

## 📋 前置条件

### 开发环境要求
- **Node.js**: >= 18.17.0 (推荐使用 LTS 版本)
- **包管理器**: pnpm >= 8.0.0
- **Git**: >= 2.30.0
- **编辑器**: VS Code + 相关插件

### 推荐插件 (VS Code)
- ES7+ React/Redux/React-Native snippets
- TypeScript Importer
- Tailwind CSS IntelliSense
- Prettier - Code formatter
- ESLint
- Auto Rename Tag

## 🏗️ 项目初始化步骤

### 1. 创建 Monorepo 结构

```bash
# 创建项目根目录
mkdir my-react-stack
cd my-react-stack

# 初始化 git 仓库
git init

# 创建基础目录结构
mkdir -p apps/web apps/admin packages/ui packages/config packages/utils
```

### 2. 配置包管理器

#### 创建 `package.json`
```json
{
  "name": "my-react-stack",
  "version": "0.0.0",
  "private": true,
  "engines": {
    "node": ">=18.17.0",
    "pnpm": ">=8.0.0"
  },
  "packageManager": "pnpm@8.10.0",
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "build": "turbo build",
    "dev": "turbo dev",
    "lint": "turbo lint",
    "type-check": "turbo type-check",
    "clean": "turbo clean"
  },
  "devDependencies": {
    "turbo": "^1.10.0",
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*"
  }
}
```

#### 创建 `pnpm-workspace.yaml`
```yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

#### 创建 `.npmrc`
```
auto-install-peers=true
prefer-workspace-packages=true
strict-peer-dependencies=false
public-hoist-pattern[]=*eslint*
public-hoist-pattern[]=*prettier*
```

### 3. 配置 Turborepo

#### 创建 `turbo.json`
```json
{
  "$schema": "https://turbo.build/schema.json",
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**", "dist/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "lint": {
      "dependsOn": ["^lint"]
    },
    "type-check": {
      "dependsOn": ["^type-check"]
    },
    "clean": {
      "cache": false
    }
  }
}
```

### 4. 创建共享配置包

#### TypeScript 配置包 (`packages/typescript-config`)
```json
// packages/typescript-config/package.json
{
  "name": "@repo/typescript-config",
  "version": "0.0.0",
  "private": true,
  "files": [
    "base.json",
    "nextjs.json",
    "react-library.json"
  ]
}
```

#### ESLint 配置包 (`packages/eslint-config`)
```json
// packages/eslint-config/package.json
{
  "name": "@repo/eslint-config",
  "version": "0.0.0",
  "private": true,
  "main": "./index.js",
  "dependencies": {
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint-config-next": "^14.0.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-react": "^7.33.0",
    "eslint-plugin-react-hooks": "^4.6.0"
  }
}
```

### 5. 创建主应用 (`apps/web`)

```bash
cd apps/web
npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"
```

#### 更新 `apps/web/package.json`
```json
{
  "name": "@repo/web",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "build": "next build",
    "dev": "next dev",
    "lint": "next lint",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "devDependencies": {
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*",
    "@repo/ui": "workspace:*",
    "@types/node": "^20.0.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "eslint": "^8.57.0",
    "typescript": "^5.0.0"
  }
}
```

### 6. 创建 UI 组件库 (`packages/ui`)

#### 初始化 UI 包
```bash
cd packages/ui
pnpm init
```

#### 安装 Shadcn UI
```bash
# 在 packages/ui 目录下
npx shadcn-ui@latest init
```

### 7. 版本管理配置

#### 创建 `syncpack.config.js`
```javascript
module.exports = {
  "versionGroups": [
    {
      "label": "Use workspace protocol when developing local packages",
      "dependencies": ["@repo/**"],
      "dependencyTypes": ["dev", "peer", "prod"],
      "pinVersion": "workspace:*"
    }
  ]
};
```

### 8. 开发工具配置

#### 创建 `.gitignore`
```
# Dependencies
node_modules/
.pnpm-store/

# Production builds
.next/
dist/
build/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

# OS
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/

# Misc
*.tgz
*.tar.gz
.turbo
```

#### 创建 `.prettierrc`
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": false,
  "tabWidth": 2,
  "useTabs": false,
  "printWidth": 80
}
```

## 🎯 验证安装

### 1. 安装依赖
```bash
# 在项目根目录
pnpm install
```

### 2. 运行开发服务器
```bash
pnpm dev
```

### 3. 构建检查
```bash
pnpm build
```

### 4. 代码质量检查
```bash
pnpm lint
pnpm type-check
```

## 📝 下一步

1. **配置主题系统** - 设置 Tailwind CSS 主题和颜色系统
2. **添加状态管理** - 集成 Zustand 和 React Query
3. **建立路由系统** - 配置 Next.js App Router
4. **创建基础组件** - 实现常用 UI 组件
5. **设置测试环境** - 配置 Jest 和 Testing Library

## 🔧 故障排除

### 常见问题

#### pnpm 安装失败
```bash
# 清理缓存
pnpm store prune
rm -rf node_modules
pnpm install
```

#### TypeScript 类型错误
```bash
# 重新生成类型
pnpm type-check
```

#### 构建失败
```bash
# 清理构建缓存
pnpm clean
pnpm build
```

## 📚 参考链接

- [Turborepo 文档](https://turbo.build/repo/docs)
- [pnpm Workspace](https://pnpm.io/workspaces)
- [Next.js 文档](https://nextjs.org/docs)
- [Shadcn UI 文档](https://ui.shadcn.com/docs) 