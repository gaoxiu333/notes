# Anthropic Prompt Library Cheatsheet

## 基础技巧

### 1. 对话开始
```
请以[身份/角色]的身份，帮我完成[任务]。
需要输出[格式/风格]的结果。
```

### 2. 输出格式化
```
请使用以下格式回答：
1. [类别1]
   - 要点
   - 细节
2. [类别2]
   ...
```

### 3. 复杂任务分解
```
让我们一步步完成这个任务：
1. 首先，[第一步]
2. 然后，[第二步]
3. 最后，[最后步骤]
```

## 常见场景

### 1. 代码辅助
```
// 代码分析
分析以下代码：
[代码块]
请提供：
1. 功能说明
2. 潜在问题
3. 优化建议

// 代码生成
用[语言]实现以下功能：
- 功能需求：
- 输入示例：
- 输出要求：
- 性能考虑：
```

### 2. 文本处理
```
// 文本摘要
总结以下内容的要点：
[文本内容]
要求：
- 3-5个主要观点
- 每点50字以内
- 保持原文语气

// 风格转换
将以下内容改写为[目标风格]：
[原文内容]
要求：
- 保持核心信息
- 调整表达方式
- 确保连贯性
```

### 3. 内容创作
```
// 写作框架
创作[内容类型]：
主题：[主题]
目标读者：[受众]
关键要素：
1. [要素1]
2. [要素2]
...

// 创意发散
基于[主题/概念]，提供：
1. 不同角度的解释
2. 潜在的应用场景
3. 创新的组合方式
```

## 高级技巧

### 1. 角色设定
```
你现在是[专业领域]的专家，具有以下特点：
- [专业背景]
- [经验水平]
- [特殊技能]
请以这个角色的视角来[执行任务]。
```

### 2. 限制条件
```
在回答时请注意：
- 时间限制：[具体限制]
- 资源约束：[具体约束]
- 特殊要求：[具体要求]
```

### 3. 迭代优化
```
// 初次输出
生成初始版本的[内容]

// 改进请求
基于以下标准优化上述内容：
1. [标准1]
2. [标准2]
...
```

## 最佳实践

1. **清晰度**
   - 使用具体的指令
   - 明确期望的输出
   - 提供示例说明

2. **结构化**
   - 分步骤说明
   - 使用标题和列表
   - 设定格式模板

3. **上下文**
   - 提供必要背景
   - 说明目标受众
   - 指定应用场景

## 常见问题与解决方案

1. **回答不够详细**
   ```
   您的回答很好，但我需要更详细的信息。请：
   1. 对[具体部分]展开说明
   2. 提供实际的例子
   3. 详细解释原理/过程
   字数要求：至少[数字]字
   ```

2. **方向偏离**
   ```
   让我们重新聚焦到核心问题。
   主要目标是：[重述目标]
   请按以下步骤调整：
   1. 首先关注[关键点1]
   2. 然后处理[关键点2]
   每个步骤请等待我的确认
   ```

3. **格式混乱**
   ```
   请严格按照以下格式重新组织内容：
   [格式模板]
   
   关键要求：
   - 使用统一的缩进
   - 保持段落结构
   - 标题层级清晰
   ```

4. **回答模糊或不确定**
   ```
   对于[具体问题]：
   - 如果确定，请直接陈述
   - 如果不确定，请说明：
     1. 已知信息
     2. 不确定的部分
     3. 可能的选项
   - 如果需要更多信息，请列出具体问题
   ```

5. **需要澄清或补充**
   ```
   在继续之前，请帮我确认：
   1. [具体问题1]的具体含义是？
   2. 关于[问题2]，您是否需要：
     - 选项A：[描述]
     - 选项B：[描述]
   3. 补充说明：[补充内容]
   ```

## 提示词模板示例

### 1. 技术文档
```
请帮我创建一份[技术主题]的文档：

目标读者：[受众类型]
文档结构：
1. 概述
2. 核心概念
3. 使用方法
4. 最佳实践
5. 常见问题

要求：
- 使用 Markdown 格式
- 包含代码示例
- 添加注意事项
```

### 2. 分析报告
```
分析以下[主题/问题]：

分析框架：
1. 现状描述
2. 问题分析
3. 解决方案
4. 建议措施
5. 预期效果

输出要求：
- 数据支持
- 逻辑清晰
- 可操作性强
```

### 3. 学习指南
```
创建[主题]的学习指南：

内容安排：
1. 基础概念（20%）
2. 核心技能（40%）
3. 实践项目（30%）
4. 进阶资源（10%）

特别注意：
- 难度递进
- 实例丰富
- 检查点设置
```

## Claude API 集成模式

### 1. 基础调用
```python
# 单轮对话
messages = [
    {
        "role": "user",
        "content": """
        任务：[描述任务]
        输入：[输入内容]
        要求：
        1. [要求1]
        2. [要求2]
        输出格式：[指定格式]
        """
    }
]
```

### 2. 多轮对话
```python
# 对话管理
messages = [
    {"role": "system", "content": "[角色设定]"},
    {"role": "user", "content": "[初始问题]"},
    {"role": "assistant", "content": "[首次回答]"},
    {"role": "user", "content": "[跟进问题]"}
]
```

### 3. MCP 工作流
```python
# MCP 处理链配置
config = {
    "workflow": [
        {
            "step": "content_extraction",
            "prompt": """
            从以下内容中提取关键信息：
            {content}
            
            按以下格式输出：
            - 主题：
            - 要点：
            - 结论：
            """
        },
        {
            "step": "analysis",
            "prompt": """
            分析上述要点：
            1. 可行性
            2. 潜在问题
            3. 改进建议
            """
        }
    ]
}
```

### 4. 错误处理
```python
# 异常处理模板
try:
    response = claude.complete(
        messages,
        max_tokens=1000,
        temperature=0.7
    )
except Exception as e:
    fallback_prompt = """
    请注意到之前的回答出现了问题。
    让我们换一种方式重试：
    1. 简化要求
    2. 分步骤完成
    3. 及时确认
    原始问题：[问题描述]
    """
```

### 5. 响应解析
```python
# 结构化输出处理
def parse_response(response):
    """
    解析 Claude 的响应
    格式化为预定义的结构
    处理特殊标记和格式
    """
    # 实现解析逻辑
    result = {
        "main_points": [],
        "details": {},
        "next_steps": []
    }
    return result
```

## 使用提醒
1. 始终在 system message 中设置明确的角色和行为约束
2. 使用结构化的提示词模板便于维护和复用
3. 实现渐进式的错误处理和重试机制
4. 保持提示词的版本控制和文档记录
5. 定期评估和优化提示词效果
